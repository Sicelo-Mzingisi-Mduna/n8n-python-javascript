[supervisord]
nodaemon=true
user=root

[program:n8n]
command=n8n start
# We wait for n8n to start before the runner tries to connect, 
# though the runner has built-in retries.
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

[program:n8n-python-runner]
# This is the exact command to launch the external python runner
command=n8n worker --task-runner:type=python
autostart=true
autorestart=true
# Give n8n a few seconds to initialize the broker port (5679)
startsecs=5
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0